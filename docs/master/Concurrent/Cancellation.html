<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Concurrent::Cancellation
  
    &mdash; Concurrent Ruby
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Concurrent::Cancellation";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span>
     &raquo; 
    <span class="title">Cancellation</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Concurrent::Cancellation
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="Synchronization/Object.html" title="Concurrent::Synchronization::Object (class)">Synchronization::Object</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="Synchronization/Object.html" title="Concurrent::Synchronization::Object (class)">Synchronization::Object</a></span></li>
          
            <li class="next">Concurrent::Cancellation</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/concurrent-ruby-edge/concurrent/edge/cancellation.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p><strong>Edge Features</strong> are under active development and may change frequently.</p>

<ul>
<li>  Deprecations are not added before incompatible changes.</li>
<li>  Edge version: <em>major</em> is always 0, <em>minor</em> bump means incompatible change,
<em>patch</em> bump means compatible change.</li>
<li>  Edge features may also lack tests and documentation.</li>
<li>  Features developed in <code>concurrent-ruby-edge</code> are expected to move
to <code>concurrent-ruby</code> when finalised.</li>
</ul>
</div>
  </div>

<p>The Cancellation abstraction provides cooperative cancellation.</p>

<p>The standard methods <code>Thread#raise</code> of <code>Thread#kill</code> available in Ruby
are very dangerous (see linked the blog posts bellow).
Therefore concurrent-ruby provides an alternative.</p>

<ul>
<li><a href="https://jvns.ca/blog/2015/11/27/why-rubys-timeout-is-dangerous-and-thread-dot-raise-is-terrifying/">https://jvns.ca/blog/2015/11/27/why-rubys-timeout-is-dangerous-and-thread-dot-raise-is-terrifying/</a></li>
<li><a href="http://www.mikeperham.com/2015/05/08/timeout-rubys-most-dangerous-api/">http://www.mikeperham.com/2015/05/08/timeout-rubys-most-dangerous-api/</a></li>
<li><a href="http://blog.headius.com/2008/02/rubys-threadraise-threadkill-timeoutrb.html">http://blog.headius.com/2008/02/rubys-threadraise-threadkill-timeoutrb.html</a></li>
</ul>

<p>It provides an object which represents a task which can be executed,
the task has to get the reference to the object and periodically cooperatively check that it is not cancelled.
Good practices to make tasks cancellable:</p>

<ul>
<li>check cancellation every cycle of a loop which does significant work,</li>
<li>do all blocking actions in a loop with a timeout then on timeout check cancellation
and if ok block again with the timeout</li>
</ul>

<p>The idea was inspired by <a href="https://msdn.microsoft.com/en-us/library/dd537607(v=vs.110).aspx">https://msdn.microsoft.com/en-us/library/dd537607(v=vs.110).aspx</a>
<h2>Examples</h2>

<p><strong>Run async task until cancelled</strong></p>

<p>Create cancellation and then run work in a background thread until it is cancelled. </p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cancellation'>cancellation</span><span class='comma'>,</span> <span class='id identifier rubyid_origin'>origin</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x000002 pending&gt;
</span><span class='comment'># - origin is used for cancelling, resolve it to cancel 
</span><span class='comment'># - cancellation is passed down to tasks for cooperative cancellation
</span><span class='id identifier rubyid_async_task'>async_task</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='period'>.</span><span class='id identifier rubyid_future'><span class='object_link'><a href="Promises/FactoryMethods.html#future-instance_method" title="Concurrent::Promises::FactoryMethods#future (method)">future</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cancellation'>cancellation</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cancellation'>cancellation</span><span class='op'>|</span>
  <span class='comment'># Do work repeatedly until it is cancelled
</span>  <span class='id identifier rubyid_do_stuff'>do_stuff</span> <span class='kw'>until</span> <span class='id identifier rubyid_cancellation'>cancellation</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>
  <span class='symbol'>:stopped_gracefully</span>
<span class='kw'>end</span>
<span class='comment'># =&gt; #&lt;Concurrent::Promises::Future:0x000003 pending&gt;
</span>
<span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.01</span>                               <span class='comment'># =&gt; 0
</span><span class='comment'># Wait a bit then stop the thread by resolving the origin of the cancellation
</span><span class='id identifier rubyid_origin'>origin</span><span class='period'>.</span><span class='id identifier rubyid_resolve'>resolve</span> 
<span class='comment'># =&gt; #&lt;Concurrent::Promises::ResolvableEvent:0x000004 resolved&gt;
</span><span class='id identifier rubyid_async_task'>async_task</span><span class='period'>.</span><span class='id identifier rubyid_value!'>value!</span>                        <span class='comment'># =&gt; :stopped_gracefully
</span></code></pre>

<p>Or let it raise an error.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cancellation'>cancellation</span><span class='comma'>,</span> <span class='id identifier rubyid_origin'>origin</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x000005 pending&gt;
</span><span class='id identifier rubyid_async_task'>async_task</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='period'>.</span><span class='id identifier rubyid_future'><span class='object_link'><a href="Promises/FactoryMethods.html#future-instance_method" title="Concurrent::Promises::FactoryMethods#future (method)">future</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cancellation'>cancellation</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cancellation'>cancellation</span><span class='op'>|</span>
  <span class='comment'># Do work repeatedly until it is cancelled
</span>  <span class='kw'>while</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_cancellation'>cancellation</span><span class='period'>.</span><span class='id identifier rubyid_check!'>check!</span>     
    <span class='id identifier rubyid_do_stuff'>do_stuff</span> 
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='comment'># =&gt; #&lt;Concurrent::Promises::Future:0x000006 pending&gt;
</span>
<span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.01</span>                               <span class='comment'># =&gt; 0
</span><span class='comment'># Wait a bit then stop the thread by resolving the origin of the cancellation
</span><span class='id identifier rubyid_origin'>origin</span><span class='period'>.</span><span class='id identifier rubyid_resolve'>resolve</span> 
<span class='comment'># =&gt; #&lt;Concurrent::Promises::ResolvableEvent:0x000007 resolved&gt;
</span><span class='id identifier rubyid_async_task'>async_task</span><span class='period'>.</span><span class='id identifier rubyid_result'>result</span>
<span class='comment'># =&gt; [false,
</span><span class='comment'>#     nil,
</span><span class='comment'>#     #&lt;Concurrent::CancelledOperationError: Concurrent::CancelledOperationError&gt;]
</span></code></pre>

<p><strong>Run additional tasks on Cancellation</strong> </p>

<p>Cancellation can also be used to log or plan re-execution.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cancellation'>cancellation</span><span class='period'>.</span><span class='id identifier rubyid_origin'>origin</span><span class='period'>.</span><span class='id identifier rubyid_chain'>chain</span> <span class='kw'>do</span>
  <span class='comment'># This block is executed after the Cancellation is cancelled  
</span>  <span class='comment'># It can then log cancellation or e.g. plan new re-execution
</span><span class='kw'>end</span>
<span class='comment'># =&gt; #&lt;Concurrent::Promises::Future:0x000008 pending&gt;
</span></code></pre>

<p><strong>Run only for limited time – Timeout replacement</strong></p>

<p>Execute task for a given time then finish. 
Instead of letting Cancellation crate its own origin, it can be passed in as argument.
The passed in origin is scheduled to be resolved in given time which then cancels the Cancellation.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='period'>.</span><span class='id identifier rubyid_schedule'><span class='object_link'><a href="Promises/FactoryMethods.html#schedule-instance_method" title="Concurrent::Promises::FactoryMethods#schedule (method)">schedule</a></span></span><span class='lparen'>(</span><span class='float'>0.02</span><span class='rparen'>)</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x000009 pending&gt;
</span><span class='comment'># or using shortcut helper method
</span><span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_timeout'><span class='object_link'><a href="#timeout-class_method" title="Concurrent::Cancellation.timeout (method)">timeout</a></span></span> <span class='float'>0.02</span> 
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x00000a pending&gt;
</span><span class='id identifier rubyid_count'>count</span>   <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="AtomicFixnum.html" title="Concurrent::AtomicFixnum (class)">AtomicFixnum</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="AtomicFixnum.html#initialize-instance_method" title="Concurrent::AtomicFixnum#initialize (method)">new</a></span></span>
<span class='comment'># =&gt; #&lt;Concurrent::AtomicFixnum:0x00000b value:0&gt;
</span><span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='period'>.</span><span class='id identifier rubyid_global_io_executor'><span class='object_link'><a href="../Concurrent.html#global_io_executor-class_method" title="Concurrent.global_io_executor (method)">global_io_executor</a></span></span><span class='period'>.</span><span class='id identifier rubyid_post'><span class='object_link'><a href="ThreadPoolExecutor.html#post-instance_method" title="Concurrent::ThreadPoolExecutor#post (method)">post</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_timeout'>timeout</span><span class='op'>|</span>
  <span class='comment'># do stuff until cancelled  
</span>  <span class='id identifier rubyid_count'>count</span><span class='period'>.</span><span class='id identifier rubyid_increment'>increment</span> <span class='kw'>until</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>
<span class='kw'>end</span> 

<span class='id identifier rubyid_timeout'>timeout</span><span class='period'>.</span><span class='id identifier rubyid_origin'>origin</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
<span class='comment'># =&gt; #&lt;Concurrent::Promises::Event:0x00000c resolved&gt;
</span><span class='id identifier rubyid_count'>count</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>                              <span class='comment'># =&gt; 177576
</span></code></pre>

<p><strong>Parallel background processing with single cancellation</strong></p>

<p>Each task tries to count to 1000 but there is a randomly failing test. The
tasks share single cancellation, when one of them fails it cancels the others.
The failing tasks ends with an error, the other tasks are gracefully cancelled.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cancellation'>cancellation</span><span class='comma'>,</span> <span class='id identifier rubyid_origin'>origin</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x00000d pending&gt;
</span><span class='id identifier rubyid_tasks'>tasks</span> <span class='op'>=</span> <span class='int'>4</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
  <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='period'>.</span><span class='id identifier rubyid_future'><span class='object_link'><a href="Promises/FactoryMethods.html#future-instance_method" title="Concurrent::Promises::FactoryMethods#future (method)">future</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cancellation'>cancellation</span><span class='comma'>,</span> <span class='id identifier rubyid_origin'>origin</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cancellation'>cancellation</span><span class='comma'>,</span> <span class='id identifier rubyid_origin'>origin</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='int'>100</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
      <span class='kw'>break</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='symbol'>:cancelled</span> <span class='kw'>if</span> <span class='id identifier rubyid_cancellation'>cancellation</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>
      <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.001</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_rand'>rand</span> <span class='op'>&gt;</span> <span class='float'>0.95</span>
        <span class='id identifier rubyid_origin'>origin</span><span class='period'>.</span><span class='id identifier rubyid_resolve'>resolve</span> <span class='comment'># cancel
</span>        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>random error</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_count'>count</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='comment'># =&gt; [#&lt;Concurrent::Promises::Future:0x00000e pending&gt;,
</span><span class='comment'>#     #&lt;Concurrent::Promises::Future:0x00000f pending&gt;,
</span><span class='comment'>#     #&lt;Concurrent::Promises::Future:0x000010 pending&gt;,
</span><span class='comment'>#     #&lt;Concurrent::Promises::Future:0x000011 pending&gt;]
</span><span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='period'>.</span><span class='id identifier rubyid_zip'>zip</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_result'><span class='object_link'><a href="Promises/Future.html#result-instance_method" title="Concurrent::Promises::Future#result (method)">result</a></span></span> 
<span class='comment'># =&gt; [false,
</span><span class='comment'>#     [:cancelled, nil, :cancelled, :cancelled],
</span><span class='comment'>#     [nil, #&lt;RuntimeError: random error&gt;, nil, nil]]
</span></code></pre>

<p>Without the randomly failing part it produces following.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cancellation'>cancellation</span><span class='comma'>,</span> <span class='id identifier rubyid_origin'>origin</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x000012 pending&gt;
</span><span class='id identifier rubyid_tasks'>tasks</span> <span class='op'>=</span> <span class='int'>4</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
  <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='period'>.</span><span class='id identifier rubyid_future'><span class='object_link'><a href="Promises/FactoryMethods.html#future-instance_method" title="Concurrent::Promises::FactoryMethods#future (method)">future</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cancellation'>cancellation</span><span class='comma'>,</span> <span class='id identifier rubyid_origin'>origin</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cancellation'>cancellation</span><span class='comma'>,</span> <span class='id identifier rubyid_origin'>origin</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='int'>100</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
      <span class='kw'>break</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='symbol'>:cancelled</span> <span class='kw'>if</span> <span class='id identifier rubyid_cancellation'>cancellation</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>
      <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.001</span>
      <span class='comment'># if rand &gt; 0.95
</span>      <span class='comment'>#   origin.resolve
</span>      <span class='comment'>#   raise &#39;random error&#39;
</span>      <span class='comment'># end
</span>      <span class='id identifier rubyid_count'>count</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='comment'># =&gt; [#&lt;Concurrent::Promises::Future:0x000013 pending&gt;,
</span><span class='comment'>#     #&lt;Concurrent::Promises::Future:0x000014 pending&gt;,
</span><span class='comment'>#     #&lt;Concurrent::Promises::Future:0x000015 pending&gt;,
</span><span class='comment'>#     #&lt;Concurrent::Promises::Future:0x000016 pending&gt;]
</span><span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='period'>.</span><span class='id identifier rubyid_zip'>zip</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_result'><span class='object_link'><a href="Promises/Future.html#result-instance_method" title="Concurrent::Promises::Future#result (method)">result</a></span></span>
<span class='comment'># =&gt; [true, [100, 100, 100, 100], nil]
</span></code></pre>

<p><strong>Combine cancellations</strong></p>

<p>The combination created by joining two cancellations cancels when the first or the other does.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cancellation_a'>cancellation_a</span><span class='comma'>,</span> <span class='id identifier rubyid_origin_a'>origin_a</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x000017 pending&gt;
</span><span class='id identifier rubyid_cancellation_b'>cancellation_b</span><span class='comma'>,</span> <span class='id identifier rubyid_origin_b'>origin_b</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x000018 pending&gt;
</span><span class='id identifier rubyid_combined_cancellation'>combined_cancellation</span>    <span class='op'>=</span> <span class='id identifier rubyid_cancellation_a'>cancellation_a</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_cancellation_b'>cancellation_b</span><span class='rparen'>)</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x000019 pending&gt;
</span>
<span class='id identifier rubyid_origin_a'>origin_a</span><span class='period'>.</span><span class='id identifier rubyid_resolve'>resolve</span>
<span class='comment'># =&gt; #&lt;Concurrent::Promises::ResolvableEvent:0x00001a resolved&gt;
</span>
<span class='id identifier rubyid_cancellation_a'>cancellation_a</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>                 <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_cancellation_b'>cancellation_b</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>                 <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_combined_cancellation'>combined_cancellation</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>          <span class='comment'># =&gt; true
</span></code></pre>

<p>If a different rule for joining is needed, the source can be combined manually.
The manually created cancellation cancels when both the first and the other cancels.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cancellation_a'>cancellation_a</span><span class='comma'>,</span> <span class='id identifier rubyid_origin_a'>origin_a</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x00001b pending&gt;
</span><span class='id identifier rubyid_cancellation_b'>cancellation_b</span><span class='comma'>,</span> <span class='id identifier rubyid_origin_b'>origin_b</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x00001c pending&gt;
</span><span class='comment'># cancels only when both a and b is cancelled
</span><span class='id identifier rubyid_combined_cancellation'>combined_cancellation</span>    <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>Cancellation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_origin_a'>origin_a</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_origin_b'>origin_b</span>
<span class='comment'># =&gt; #&lt;Concurrent::Cancellation:0x00001d pending&gt;
</span>
<span class='id identifier rubyid_origin_a'>origin_a</span><span class='period'>.</span><span class='id identifier rubyid_resolve'>resolve</span>
<span class='comment'># =&gt; #&lt;Concurrent::Promises::ResolvableEvent:0x00001e resolved&gt;
</span>
<span class='id identifier rubyid_cancellation_a'>cancellation_a</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>        <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_cancellation_b'>cancellation_b</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>        <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_combined_cancellation'>combined_cancellation</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span> <span class='comment'>#=&gt; false
</span>
<span class='id identifier rubyid_origin_b'>origin_b</span><span class='period'>.</span><span class='id identifier rubyid_resolve'>resolve</span>
<span class='comment'># =&gt; #&lt;Concurrent::Promises::ResolvableEvent:0x00001f resolved&gt;
</span><span class='id identifier rubyid_combined_cancellation'>combined_cancellation</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span> <span class='comment'>#=&gt; true
</span></code></pre>
</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#timeout-class_method" title="timeout (class method)">.<strong>timeout</strong>(intended_time)  &#x21d2; Cancellation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create Cancellation which will cancel itself in given time.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#canceled%3F-instance_method" title="#canceled? (instance method)">#<strong>canceled?</strong>  &#x21d2; true, false </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Is the cancellation cancelled? Respective, was the origin of the cancellation resolved.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check!-instance_method" title="#check! (instance method)">#<strong>check!</strong>(error = CancelledOperationError)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Raise error when cancelled.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(origin = Promises.resolvable_event)  &#x21d2; Cancellation </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates the cancellation object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#join-instance_method" title="#join (instance method)">#<strong>join</strong>(*cancellations)  &#x21d2; Cancellation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new Cancellation which is cancelled when first of the supplied cancellations or self is cancelled.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#origin-instance_method" title="#origin (instance method)">#<strong>origin</strong>  &#x21d2; Promises::Future, Promises::Event </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The event or future which is the origin of the cancellation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_ary-instance_method" title="#to_ary (instance method)">#<strong>to_ary</strong>  &#x21d2; Array(Cancellation, Promises::Future), Array(Cancellation, Promises::Event) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Allow to multi-assign the Cancellation object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; String </a>
    

    
      (also: #inspect)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Short string representation.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(origin = Promises.resolvable_event)  &#x21d2; <tt><span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates the cancellation object.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_cancellation'>cancellation</span><span class='comma'>,</span> <span class='id identifier rubyid_origin'>origin</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>origin</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Promises/Future.html" title="Concurrent::Promises::Future (class)">Promises::Future</a></span></tt>, <tt><span class='object_link'><a href="Promises/Event.html" title="Concurrent::Promises::Event (class)">Promises::Event</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Promises.resolvable_event</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>of the cancellation.
When it is resolved the cancellation is canceled.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#to_ary-instance_method" title="Concurrent::Cancellation#to_ary (method)">#to_ary</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent-ruby-edge/concurrent/edge/cancellation.rb', line 52</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_origin'>origin</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='period'>.</span><span class='id identifier rubyid_resolvable_event'><span class='object_link'><a href="Promises/FactoryMethods.html#resolvable_event-instance_method" title="Concurrent::Promises::FactoryMethods#resolvable_event (method)">resolvable_event</a></span></span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='ivar'>@Origin</span> <span class='op'>=</span> <span class='id identifier rubyid_origin'>origin</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="timeout-class_method">
  
    .<strong>timeout</strong>(intended_time)  &#x21d2; <tt><span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create Cancellation which will cancel itself in given time</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>intended_time</span>
      
      
        <span class='type'>(<tt>Numeric</tt>, <tt>Time</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>Numeric</code> means to run in <code>intended_time</code> seconds.
<code>Time</code> means to run on <code>intended_time</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent-ruby-edge/concurrent/edge/cancellation.rb', line 41</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_timeout'>timeout</span><span class='lparen'>(</span><span class='id identifier rubyid_intended_time'>intended_time</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'>new</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='period'>.</span><span class='id identifier rubyid_schedule'><span class='object_link'><a href="Promises/FactoryMethods.html#schedule-instance_method" title="Concurrent::Promises::FactoryMethods#schedule (method)">schedule</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_intended_time'>intended_time</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="canceled?-instance_method">
  
    #<strong>canceled?</strong>  &#x21d2; <tt>true</tt>, <tt>false</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Is the cancellation cancelled?
Respective, was the origin of the cancellation resolved.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent-ruby-edge/concurrent/edge/cancellation.rb', line 75</span>

<span class='kw'>def</span> <span class='id identifier rubyid_canceled?'>canceled?</span>
  <span class='ivar'>@Origin</span><span class='period'>.</span><span class='id identifier rubyid_resolved?'>resolved?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check!-instance_method">
  
    #<strong>check!</strong>(error = CancelledOperationError)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Raise error when cancelled</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>error</span>
      
      
        <span class='type'>(<tt>#exception</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>CancelledOperationError</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>to be risen</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>the error</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent-ruby-edge/concurrent/edge/cancellation.rb', line 83</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check!'>check!</span><span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html#CancelledOperationError-constant" title="Concurrent::CancelledOperationError (constant)">CancelledOperationError</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_error'>error</span> <span class='kw'>if</span> <span class='id identifier rubyid_canceled?'>canceled?</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="join-instance_method">
  
    #<strong>join</strong>(*cancellations)  &#x21d2; <tt><span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new Cancellation which is cancelled when first
of the supplied cancellations or self is cancelled.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>cancellations</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>to combine</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>new cancellation</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent-ruby-edge/concurrent/edge/cancellation.rb', line 93</span>

<span class='kw'>def</span> <span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_cancellations'>cancellations</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='period'>.</span><span class='id identifier rubyid_any_event'><span class='object_link'><a href="Promises/FactoryMethods.html#any_event-instance_method" title="Concurrent::Promises::FactoryMethods#any_event (method)">any_event</a></span></span><span class='lparen'>(</span><span class='op'>*</span><span class='lbracket'>[</span><span class='ivar'>@Origin</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_cancellations'>cancellations</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:origin</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="origin-instance_method">
  
    #<strong>origin</strong>  &#x21d2; <tt><span class='object_link'><a href="Promises/Future.html" title="Concurrent::Promises::Future (class)">Promises::Future</a></span></tt>, <tt><span class='object_link'><a href="Promises/Event.html" title="Concurrent::Promises::Event (class)">Promises::Event</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The event or future which is the origin of the cancellation</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Promises/Future.html" title="Concurrent::Promises::Future (class)">Promises::Future</a></span></tt>, <tt><span class='object_link'><a href="Promises/Event.html" title="Concurrent::Promises::Event (class)">Promises::Event</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent-ruby-edge/concurrent/edge/cancellation.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_origin'>origin</span>
  <span class='ivar'>@Origin</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_ary-instance_method">
  
    #<strong>to_ary</strong>  &#x21d2; <tt><span class='object_link'><a href="Array.html" title="Concurrent::Array (class)">Array</a></span>(<span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span>, <span class='object_link'><a href="Promises/Future.html" title="Concurrent::Promises::Future (class)">Promises::Future</a></span>)</tt>, <tt><span class='object_link'><a href="Array.html" title="Concurrent::Array (class)">Array</a></span>(<span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span>, <span class='object_link'><a href="Promises/Event.html" title="Concurrent::Promises::Event (class)">Promises::Event</a></span>)</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Allow to multi-assign the Cancellation object</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_cancellation'>cancellation</span>         <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_cancellation'>cancellation</span><span class='comma'>,</span> <span class='id identifier rubyid_origin'>origin</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Array.html" title="Concurrent::Array (class)">Array</a></span>(<span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span>, <span class='object_link'><a href="Promises/Future.html" title="Concurrent::Promises::Future (class)">Promises::Future</a></span>)</tt>, <tt><span class='object_link'><a href="Array.html" title="Concurrent::Array (class)">Array</a></span>(<span class='object_link'><a href="" title="Concurrent::Cancellation (class)">Cancellation</a></span>, <span class='object_link'><a href="Promises/Event.html" title="Concurrent::Promises::Event (class)">Promises::Event</a></span>)</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent-ruby-edge/concurrent/edge/cancellation.rb', line 62</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_ary'>to_ary</span>
  <span class='lbracket'>[</span><span class='kw'>self</span><span class='comma'>,</span> <span class='ivar'>@Origin</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    #<strong>to_s</strong>  &#x21d2; <tt>String</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='inspect-instance_method'>inspect</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Short string representation.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent-ruby-edge/concurrent/edge/cancellation.rb', line 99</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_format'>format</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%s %s&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='kw'>super</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_canceled?'>canceled?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>canceled</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pending</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_blank">yard</a>.
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57940973-1', 'auto');
  ga('send', 'pageview');

</script>

    </div>
  </body>
</html>