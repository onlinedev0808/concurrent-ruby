<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Concurrent::ErlangActor
  
    &mdash; Concurrent Ruby
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Concurrent::ErlangActor";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (E)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span>
     &raquo; 
    <span class="title">ErlangActor</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Concurrent::ErlangActor
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="ErlangActor/EnvironmentConstants.html" title="Concurrent::ErlangActor::EnvironmentConstants (module)">EnvironmentConstants</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib-edge/concurrent/edge/erlang_actor.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This module provides actor abstraction that has same behaviour as Erlang actor.</p>

<p><h2>Examples</h2>

<p>The simplest example is to use the actor as an asynchronous execution.
Although, <code>Promises.future { 1 + 1 }</code> is better suited for that purpose.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_actor'>actor</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>ErlangActor</span><span class='period'>.</span><span class='id identifier rubyid_spawn'><span class='object_link'><a href="#spawn-class_method" title="Concurrent::ErlangActor.spawn (method)">spawn</a></span></span><span class='lparen'>(</span><span class='symbol'>:on_thread</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>addition</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='int'>1</span> <span class='op'>+</span> <span class='int'>1</span> <span class='rbrace'>}</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000002 addition&gt;
</span><span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_terminated'>terminated</span><span class='period'>.</span><span class='id identifier rubyid_value!'>value!</span>                  <span class='comment'># =&gt; 2
</span></code></pre>

<p>Let&#39;s send some messages and maintain some internal state 
which is what actors are good for.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_actor'>actor</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>ErlangActor</span><span class='period'>.</span><span class='id identifier rubyid_spawn'><span class='object_link'><a href="#spawn-class_method" title="Concurrent::ErlangActor.spawn (method)">spawn</a></span></span><span class='lparen'>(</span><span class='symbol'>:on_thread</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sum</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='int'>0</span> <span class='comment'># internal state
</span>  <span class='comment'># receive and sum the messages until the actor gets :done
</span>  <span class='kw'>while</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_receive'>receive</span>
    <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>==</span> <span class='symbol'>:done</span>
    <span class='comment'># if the message is asked and not only told, 
</span>    <span class='comment'># reply with a current sum
</span>    <span class='id identifier rubyid_reply'>reply</span> <span class='id identifier rubyid_sum'>sum</span> <span class='op'>+=</span> <span class='id identifier rubyid_message'>message</span>   
  <span class='kw'>end</span>
  <span class='id identifier rubyid_sum'>sum</span>
<span class='kw'>end</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000003 sum&gt;
</span></code></pre>

<p>The actor can be either told a message asynchronously, 
or asked. The ask method will block until actor replies.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># tell returns immediately returning the actor 
</span><span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_tell'>tell</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tell'>tell</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000003 sum&gt;
</span><span class='comment'># blocks, waiting for the answer 
</span><span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_ask'>ask</span> <span class='int'>10</span>                             <span class='comment'># =&gt; 12
</span><span class='comment'># stop the actor
</span><span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_tell'>tell</span> <span class='symbol'>:done</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000003 sum&gt;
</span><span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_terminated'>terminated</span><span class='period'>.</span><span class='id identifier rubyid_value!'>value!</span>                  <span class='comment'># =&gt; 12
</span></code></pre>

<h3>Receiving</h3>

<p>Simplest message receive.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_actor'>actor</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>ErlangActor</span><span class='period'>.</span><span class='id identifier rubyid_spawn'><span class='object_link'><a href="#spawn-class_method" title="Concurrent::ErlangActor.spawn (method)">spawn</a></span></span><span class='lparen'>(</span><span class='symbol'>:on_thread</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_receive'>receive</span> <span class='rbrace'>}</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000004&gt;
</span><span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_tell'>tell</span> <span class='symbol'>:m</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000004&gt;
</span><span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_terminated'>terminated</span><span class='period'>.</span><span class='id identifier rubyid_value!'>value!</span>                  <span class='comment'># =&gt; :m
</span></code></pre>

<p>which also works for actor on pool, 
because if no block is given it will use a default block <code>{ |v| v }</code> </p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_actor'>actor</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>ErlangActor</span><span class='period'>.</span><span class='id identifier rubyid_spawn'><span class='object_link'><a href="#spawn-class_method" title="Concurrent::ErlangActor.spawn (method)">spawn</a></span></span><span class='lparen'>(</span><span class='symbol'>:on_pool</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_receive'>receive</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000005&gt;
</span><span class='comment'># can simply be following
</span><span class='id identifier rubyid_actor'>actor</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>ErlangActor</span><span class='period'>.</span><span class='id identifier rubyid_spawn'><span class='object_link'><a href="#spawn-class_method" title="Concurrent::ErlangActor.spawn (method)">spawn</a></span></span><span class='lparen'>(</span><span class='symbol'>:on_pool</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_receive'>receive</span> <span class='rbrace'>}</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000006&gt;
</span><span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_tell'>tell</span> <span class='symbol'>:m</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000006&gt;
</span><span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_terminated'>terminated</span><span class='period'>.</span><span class='id identifier rubyid_value!'>value!</span>                  <span class='comment'># =&gt; :m
</span></code></pre>

<p>TBA</p>

<h3>Actor types</h3>

<p>There are two types of actors. 
The type is specified when calling spawn as a first argument, 
<code>Concurrent::ErlangActor.spawn(:on_thread, ...</code> or 
<code>Concurrent::ErlangActor.spawn(:on_pool, ...</code>.</p>

<p>The main difference is in how receive method returns.</p>

<ul>
<li><p><code>:on_thread</code> it blocks the thread until message is available, 
then it returns or calls the provided block first. </p></li>
<li><p>However, <code>:on_pool</code> it has to free up the thread on the receive 
call back to the pool. Therefore the call to receive ends the 
execution of current scope. The receive has to be given block
or blocks that act as a continuations and are called 
when there is message available.</p></li>
</ul>

<p>Let&#39;s have a look at how the bodies of actors differ between the types:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ping'>ping</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>ErlangActor</span><span class='period'>.</span><span class='id identifier rubyid_spawn'><span class='object_link'><a href="#spawn-class_method" title="Concurrent::ErlangActor.spawn (method)">spawn</a></span></span><span class='lparen'>(</span><span class='symbol'>:on_thread</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_reply'>reply</span> <span class='id identifier rubyid_receive'>receive</span> <span class='rbrace'>}</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000007&gt;
</span><span class='id identifier rubyid_ping'>ping</span><span class='period'>.</span><span class='id identifier rubyid_ask'>ask</span> <span class='int'>42</span>                              <span class='comment'># =&gt; 42
</span></code></pre>

<p>It first calls receive, which blocks the thread of the actor. 
When it returns the received message is passed an an argument to reply,
which replies the same value back to the ask method. 
Then the actor terminates normally, because there is nothing else to do.</p>

<p>However when running on pool a block with code which should be evaluated 
after the message is received has to be provided. </p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ping'>ping</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>ErlangActor</span><span class='period'>.</span><span class='id identifier rubyid_spawn'><span class='object_link'><a href="#spawn-class_method" title="Concurrent::ErlangActor.spawn (method)">spawn</a></span></span><span class='lparen'>(</span><span class='symbol'>:on_pool</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_receive'>receive</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span> <span class='id identifier rubyid_reply'>reply</span> <span class='id identifier rubyid_m'>m</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000008&gt;
</span><span class='id identifier rubyid_ping'>ping</span><span class='period'>.</span><span class='id identifier rubyid_ask'>ask</span> <span class='int'>42</span>                              <span class='comment'># =&gt; 42
</span></code></pre>

<p>It starts by calling receive which will remember the given block for later
execution when a message is available and stops executing the current scope.
Later when a message becomes available the previously provided block is given
the message and called. The result of the block is the final value of the 
normally terminated actor.</p>

<p>The direct blocking style of <code>:on_thread</code> is simpler to write and more straight
forward however it has limitations. Each <code>:on_thread</code> actor creates a Thread 
taking time and resources. 
There is also a limited number of threads the Ruby process can create 
so you may hit the limit and fail to create more threads and therefore actors.  </p>

<p>Since the <code>:on_pool</code> actor runs on a poll of threads, its creations 
is faster and cheaper and it does not create new threads. 
Therefore there is no limit (only RAM) on how many actors can be created.</p>

<p>To simplify, if you need only few actors <code>:on_thread</code> is fine. 
However if you will be creating hundreds of actors or 
they will be short-lived <code>:on_pool</code> should be used.      </p>

<h3>Erlang behaviour</h3>

<p>The actor matches Erlang processes in behaviour. 
Therefore it supports the usual Erlang actor linking, monitoring, exit behaviour, etc.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_actor'>actor</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span><span class='op'>::</span><span class='const'>ErlangActor</span><span class='period'>.</span><span class='id identifier rubyid_spawn'><span class='object_link'><a href="#spawn-class_method" title="Concurrent::ErlangActor.spawn (method)">spawn</a></span></span><span class='lparen'>(</span><span class='symbol'>:on_thread</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_spawn'>spawn</span><span class='lparen'>(</span><span class='label'>link:</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='comment'># equivalent of spawn_link in Erlang
</span>    <span class='id identifier rubyid_terminate'>terminate</span> <span class='symbol'>:err</span> <span class='comment'># equivalent of exit in Erlang    
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_trap'>trap</span> <span class='comment'># equivalent of process_flag(trap_exit, true) 
</span>  <span class='id identifier rubyid_receive'>receive</span>  
<span class='kw'>end</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Pid:0x000009&gt;
</span><span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_terminated'>terminated</span><span class='period'>.</span><span class='id identifier rubyid_value!'>value!</span>
<span class='comment'># =&gt; #&lt;Concurrent::ErlangActor::Exit:0x00000a
</span><span class='comment'>#     @from=#&lt;Concurrent::ErlangActor::Pid:0x00000b&gt;,
</span><span class='comment'>#     @link_terminated=true,
</span><span class='comment'>#     @reason=:err&gt;
</span></code></pre>

<h3>TODO</h3>

<ul>
<li>  receives</li>
<li>  More erlang behaviour examples</li>
<li>  Back pressure with bounded mailbox</li>
<li>  _op methods</li>
<li>  types of actors</li>
</ul>
</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="ErlangActor/EnvironmentConstants.html" title="Concurrent::ErlangActor::EnvironmentConstants (module)">EnvironmentConstants</a></span>, <span class='object_link'><a href="ErlangActor/HasFrom.html" title="Concurrent::ErlangActor::HasFrom (module)">HasFrom</a></span>, <span class='object_link'><a href="ErlangActor/HasReference.html" title="Concurrent::ErlangActor::HasReference (module)">HasReference</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="ErlangActor/Down.html" title="Concurrent::ErlangActor::Down (class)">Down</a></span>, <span class='object_link'><a href="ErlangActor/Environment.html" title="Concurrent::ErlangActor::Environment (class)">Environment</a></span>, <span class='object_link'><a href="ErlangActor/Error.html" title="Concurrent::ErlangActor::Error (class)">Error</a></span>, <span class='object_link'><a href="ErlangActor/Exit.html" title="Concurrent::ErlangActor::Exit (class)">Exit</a></span>, <span class='object_link'><a href="ErlangActor/NoActor.html" title="Concurrent::ErlangActor::NoActor (class)">NoActor</a></span>, <span class='object_link'><a href="ErlangActor/NoReply.html" title="Concurrent::ErlangActor::NoReply (class)">NoReply</a></span>, <span class='object_link'><a href="ErlangActor/Pid.html" title="Concurrent::ErlangActor::Pid (class)">Pid</a></span>, <span class='object_link'><a href="ErlangActor/Reference.html" title="Concurrent::ErlangActor::Reference (class)">Reference</a></span>
    
  
</p>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#spawn-class_method" title="spawn (class method)">.<strong>spawn</strong>(type, channel: Promises::Channel.new, environment: Environment, name: nil, **options, &amp;body)  &#x21d2; Pid </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates an actor.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminate-class_method" title="terminate (class method)">.<strong>terminate</strong>(pid, reason)  &#x21d2; true </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Same as <span class='object_link'><a href="ErlangActor/Environment.html#terminate-instance_method" title="Concurrent::ErlangActor::Environment#terminate (method)">Environment#terminate</a></span>, but it requires pid.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="spawn-class_method">
  
    .<strong>spawn</strong>(type, channel: Promises::Channel.new, environment: Environment, name: nil, **options, &amp;body)  &#x21d2; <tt><span class='object_link'><a href="ErlangActor/Pid.html" title="Concurrent::ErlangActor::Pid (class)">Pid</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates an actor. Same as <span class='object_link'><a href="ErlangActor/Environment.html#spawn-instance_method" title="Concurrent::ErlangActor::Environment#spawn (method)">Concurrent::ErlangActor::Environment#spawn</a></span> but lacks link and monitor options.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>:on_thread</tt>, <tt>:on_pool</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>channel</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Channel.html" title="Concurrent::Channel (class)">Channel</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>environment</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ErlangActor/Environment.html" title="Concurrent::ErlangActor::Environment (class)">Environment</a></span></tt>, <tt>Module</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>of the actor</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Concurrent::Hash (class)">Hash</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>**options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:executor</span>
          <span class="type">(<tt><span class='object_link'>ExecutorService</span></tt>)</span>
          <span class="default">
            
          </span>
          
        </li>
      
    </ul>
  
    
    

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ErlangActor/Pid.html" title="Concurrent::ErlangActor::Pid (class)">Pid</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="ErlangActor/Environment.html#spawn-instance_method" title="Concurrent::ErlangActor::Environment#spawn (method)">Concurrent::ErlangActor::Environment#spawn</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


452
453
454
455
456
457
458
459
460
461
462</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib-edge/concurrent/edge/erlang_actor.rb', line 452</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_spawn'>spawn</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span>
    <span class='label'>channel:</span> <span class='const'><span class='object_link'><a href="Promises.html" title="Concurrent::Promises (module)">Promises</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Promises/Channel.html" title="Concurrent::Promises::Channel (class)">Channel</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='comma'>,</span>
    <span class='label'>environment:</span> <span class='const'><span class='object_link'><a href="ErlangActor/Environment.html" title="Concurrent::ErlangActor::Environment (class)">Environment</a></span></span><span class='comma'>,</span>
    <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_actor'>actor</span> <span class='op'>=</span> <span class='id identifier rubyid_create'>create</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_channel'>channel</span><span class='comma'>,</span> <span class='id identifier rubyid_environment'>environment</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_body'>body</span>
  <span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_run'>run</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_actor'>actor</span><span class='period'>.</span><span class='id identifier rubyid_pid'>pid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="terminate-class_method">
  
    .<strong>terminate</strong>(pid, reason)  &#x21d2; <tt>true</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Same as <span class='object_link'><a href="ErlangActor/Environment.html#terminate-instance_method" title="Concurrent::ErlangActor::Environment#terminate (method)">Concurrent::ErlangActor::Environment#terminate</a></span>, but it requires pid.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pid</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ErlangActor/Pid.html" title="Concurrent::ErlangActor::Pid (class)">Pid</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>reason</span>
      
      
        <span class='type'>(<tt>Object</tt>, <tt>:normal</tt>, <tt>:kill</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


468
469
470
471
472
473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib-edge/concurrent/edge/erlang_actor.rb', line 468</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_terminate'>terminate</span><span class='lparen'>(</span><span class='id identifier rubyid_pid'>pid</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_reason'>reason</span> <span class='op'>==</span> <span class='symbol'>:kill</span>
    <span class='id identifier rubyid_pid'>pid</span><span class='period'>.</span><span class='id identifier rubyid_tell'>tell</span> <span class='const'>Kill</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_pid'>pid</span><span class='period'>.</span><span class='id identifier rubyid_tell'>tell</span> <span class='const'><span class='object_link'><a href="ErlangActor/Exit.html" title="Concurrent::ErlangActor::Exit (class)">Exit</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_blank">yard</a>.
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57940973-1', 'auto');
  ga('send', 'pageview');

</script>

    </div>
  </body>
</html>